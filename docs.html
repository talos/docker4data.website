<!DOCTYPE html>
<html prefix="
og: http://ogp.me/ns#
article: http://ogp.me/ns/article#
" lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Using Docker4Data | Docker for Data</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<link rel="alternate" type="application/rss+xml" title="RSS" href="rss.xml">
<link rel="canonical" href="http://www.docker4data.com/docs.html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]--><meta name="author" content="John Krauss">
<meta property="og:site_name" content="Docker for Data">
<meta property="og:title" content="Using Docker4Data">
<meta property="og:url" content="http://www.docker4data.com/docs.html">
<meta property="og:description" content="Installing
Docker4data is as portable as Docker itself.  As the container is large, it is
recommended that you install in a place with a fast network, which may be
a cloud provider rather than locally">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2015-02-04T16:32:07-05:00">
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-fixed-top" role="navigation"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="http://www.docker4data.com/">

                <span id="blog-title">Docker for Data</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse navbar-ex1-collapse">
            <ul class="nav navbar-nav">
<li>
<a href="try-it">Try it</a>
                </li>
<li>
<a href="docs">Docs</a>
                </li>
<li>
<a href="https://github.com/talos/docker4data">Code</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<li>
    <a href="./docs.md" id="sourcelink">Source</a>
    </li>
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><div class="container" id="content">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
<article class="storypage" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title" itemprop="headline name"><a href="#" class="u-url">Using Docker4Data</a></h1>

        
    </header><div class="e-content entry-content" itemprop="articleBody text">
    <div>
<h2>Installing</h2>
<p>Docker4data is as portable as Docker itself.  As the container is large, it is
recommended that you install in a place with a fast network, which may be
a cloud provider rather than locally.  There are instructions below for both
DigitalOcean and AWS, but any machine with Docker on AUFS (which should include
Boot2Docker on Mac, although this has not been tested) should support
Docker4Data.</p>
<h3>Locally</h3>
<p>If you have Docker <a href="http://docs.docker.com/installation/">installed locally</a>, you can use Docker4Data to explore
large datasets immediately on your machine!</p>
<p>You'll still need to pull many GB of data down, however.  If you're not on
a fast wired connection, this could take a long time.  You may find it's still
faster to use a cloud provider, as they can provide superior network
throughput.  There are two examples (DigitalOcean and AWS) below.</p>
<p>You'll also need at least ~18GB of free disk space, and you'll need to make
sure that you're using the AUFS storage driver.</p>
<p>Once Docker is running (on Mac, you will need to make sure to run
<code>boot2docker</code>) you can skip to Pull Down the Image.</p>
<h3>DigitalOcean</h3>
<p>DigitalOcean is the easiest way to get started with a large dataset using
Docker4Data, as they supply an Ubuntu image pre-stocked with Docker using AUFS.</p>
<h4>Create the instance</h4>
<p>Log into <a href="https://www.digitalocean.com">DigitalOcean</a>, then select "Create Droplet".  Name your droplet.
You can choose the cheapest ($5/month) option.  Under "Select Image", choose
the "Applications" tab and select "Docker 1.4.1 on 14.04".  Create the droplet,
and wait about a minute for it to be provisioned.</p>
<h4>Log in</h4>
<p>You can either use the "Console Access" button or log in via root at the public
IP.</p>
<pre class="code literal-block">ssh root@my.ip.ad.rr
</pre>


<p>You're now ready to pull down the image (below).</p>
<h3>AWS</h3>
<p>AWS is a great option to explore data, as billing is pro-rated and a free-tier
eligible instance should be sufficient to get started.  However, Docker doesn't
come pre-installed on Amazon's Ubuntu instance, so setup is more involved than
with DigitalOcean.</p>
<h4>Create the instance</h4>
<p>First, create an Ubuntu instance. "Ubuntu Server 14.04 LTS (HVM), SSD Volume
Type - ami-9a562df2" and "t2.micro" should be fine.  You'll need to do "Step 3:
Configure Instance Details" in order to enable "Auto-assign public IP".  You'll
also need to up the amount of hard disk available on <code>dev/sda1</code> to 20GB in
"Step 4: Add Storage".</p>
<p>By default, we'll run the Docker4Data web frontend on port 8080.  You'll need
to allow inbound TCP traffic for this port.  To do so, on "Step 6", add a rule
to the security group.  Select "Custom TCP Rule", and enter "8080" under "Port
Range".  Choose "Anywhere" as the source unless you know your IP and wish to
limit access to it exclusively.</p>
<h4>Log in</h4>
<p>Once the instance is created, click the "Connect" button in the AWS console.
This should supply your IP address to connect to.  The connection string should
look like this, except with your private key and IP:</p>
<pre class="code literal-block">ssh -i /path/to/private-key.pem ubuntu@my.ip.ad.dr
</pre>


<p>Once you're in, we need to make sure we have enough disk space.</p>
<pre class="code literal-block">df -h
</pre>


<p>If <code>/dev/xvda1</code> doesn't show at least 15G under "Avail", you'll need to
re-create this instance with more hard disk in "Step 4" above.</p>
<h4>Install Docker</h4>
<p>It's not too difficult to get Docker running on Ubuntu.  You'll first need to
install AUFS, as without it Docker doesn't play nice with really big images.</p>
<pre class="code literal-block">sudo apt-get update
sudo apt-get -y install linux-image-extra-$(uname -r)
curl -sSL https://get.docker.com/ubuntu/ | sudo sh
</pre>


<h2>Pull down the image</h2>
<p>This should take between 9 and 11 minutes on DigitalOcean, and a little less on
AWS.  Grab some coffee.  <a href="http://play-minesweeper.com/">Play Minesweeper</a>.</p>
<pre class="code literal-block">time sudo docker pull thegovlab/docker4data-acris
</pre>


<h2>Play with the data</h2>
<p>First, you'll need to launch the image.  This will run the web interface on
port 8080.  Change the number before the colon to change to a different port.</p>
<pre class="code literal-block">sudo docker run --name acris -d -p 8080:8080 thegovlab/docker4data-acris
</pre>


<p>You should now be able to navigate to the IP of your DigitalOcean or Amazon
instance and make SQL queries directly on the data there using a web interface.
If you're running locally, the web interface will be at
<a href="http://localhost:8080">http://localhost:8080</a>.</p>
<p>If you want to make queries directly in the commandline, you can drop into psql
directly.</p>
<pre class="code literal-block">sudo docker exec -i acris gosu postgres psql
</pre>
</div>
    </div>
    
</article>
</div>
        <!--End of body content-->

        <footer>
            Contents Â© 2015         <a href="mailto:john@thegovlab.org">John Krauss</a> - Powered by         <a href="http://getnikola.com" rel="nofollow">Nikola</a>         
            
        </footer>
</div>
</div>

            <script src="assets/js/all-nocdn.js"></script><script>jQuery("a.image-reference").colorbox({rel:"gal",maxWidth:"100%",maxHeight:"100%",scalePhotos:true});</script><!-- fancy dates --><script>
    moment.locale("");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates -->
</body>
</html>
